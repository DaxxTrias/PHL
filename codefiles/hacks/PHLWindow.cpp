#include "PHLWindow.h"
#include "../PHLConsole.h"

PHLWindow::PHLWindow ()
{
	Addr hWnd = HWND_PATTERN_SEARCH_OFFSET +
		PHLMemory::findPattern (HexPattern ({
		0x8B, 0x06, 0xF3, 0x0F,
		0x7E, 0x44, 0x24, 0x10,
		0x66, 0x0F, 0xD6, 0x04,
		0x18, 0xF3, 0x0F, 0x7E,
		0x44, 0x24, 0x18, 0x66,
		0x0F, 0xD6, 0x44, 0x18,
		0x08, 0xF3, 0x0F, 0x7E,
		0x44, 0x24, 0x20, 0x66,
		0x0F, 0xD6, 0x44, 0x18,
		0x10, 0x47, 0x83, 0xC3
	}));
	PHLMemory::reverseByteOrder (hWnd);
	this->hWnd = (HWND)PHLMemory::readAddr(hWnd);
}

void PHLWindow::printAddr ()
{
	PHLConsole::printLog ("Window Handle:          %.8X", hWnd);
}
